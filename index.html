<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>Conversor GBFF – JSON</title>
  <meta name="author" content="Matheus Avellar">
  <!-- <meta name="description" content=""> -->
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" type="text/css" href="./style.css">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
  <header>
    <p class="overhead">Conversor</p>
    <h1>GBFF -> JSON </h1>
  </header>
  <main>
    <section>
      <p>
        Insira um link para um arquivo GBFF no campo abaixo, ou envie um arquivo
        de seu computador clicando em "Upload".
      </p>
    </section>
    <section>
      <form method="post" action="/file" enctype="multipart/form-data">
        <article class="textinput">
          <input id="gbff" name="file-link" type="text" placeholder="Link do seu arquivo">
        </article>
        <p>ou</p>
        <article>
          <label class="file-label textinput" for="file">
            <input id="file-preview" type="text" placeholder="Escolha um arquivo" disabled>
          </label>
          <label class="file">
            <span class="file-custom">Upload</span>
            <input id="file" name="file" type="file">
          </label>
          <script>
const filepreview = document.getElementById("file-preview");
const fileinput = document.getElementById("file");
fileinput.onchange = function(e) {
  if(fileinput.files.length == 1) {
    filepreview.value = `${fileinput.files[0].name} (${humanFileSize(fileinput.files[0].size,2)})`;
  } else if(fileinput.files.length > 1) {
    alert("Por favor, envie somente 1 arquivo!");
  }
}

// [Ref] stackoverflow.com/a/14919494/4824627
function humanFileSize(bytes, dp=1) {
  const thresh = 1024;

  if(Math.abs(bytes) < thresh)
    return `${bytes} B`;

  const units = ["KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"];
  let u = -1;
  const r = 10**dp;

  do {
    bytes /= thresh;
    ++u;
  } while(Math.round(Math.abs(bytes) * r) / r >= thresh && u < units.length - 1);

  return bytes.toFixed(dp) + " " + units[u];
}
          </script>
        </article>
        <article class="right">
          <button type="submit">Enviar</button>
        </article>
      </form>
      <hr>
    </section>
    <section>
      <p>
        <b>Já fez upload de um arquivo anteriormente?</b>
      </p>
      <ul>
        <li>Clique <a href="./input">aqui</a> para visualizar arquivos enviados;</li>
        <li>Clique <a href="./output">aqui</a> para visualizar arquivos convertidos.</li>
      </ul>
    </section>
  </main>
  <footer>
    <section>
      <img class="minerva" src="./minerva.svg" alt="Perfil da Minerva, avatar da UFRJ.">
      <article>
        <p>
          Desenvolvido por <a href="">Breno Costa</a>, <a href="">Bruno Hryniewicz</a>,
          <a href="">Matheus Avellar</a>, <a href="">Nickolas Gomes</a> e
          <a href="">Pedro</a>, para a disciplina de <strong>Bioinformática</strong>.
        </p>
        <p>
          Curso de Ciência da Computação, UFRJ – 2020.★
        </p>
      </article>
    </section>
  </footer>
  <!--[Ref] csswizardry.com/2020/05/the-fastest-google-fonts-->
  <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Inter:wght@400;500;700;800&display=swap">
  <link rel="stylesheet" media="print" onload="this.media='all'"
        href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Inter:wght@400;500;700;800&display=swap">
</body>
</html>